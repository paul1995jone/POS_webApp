function showSection(e){document.querySelectorAll(".billing-section, .stock-section, .statistics-section, .export-section, .manage-user-section, .items-section, .sales-section, .view-sales-section, .manage-item, .export-data").forEach(e=>{e.style.display="none"});let t=document.getElementById(e);t&&(t.style.display="flex"),document.querySelectorAll(".sidebar nav button").forEach(e=>e.classList.remove("active"));let a=document.querySelector(`.sidebar nav form[data-target="${e}"]`);if(a){let l=a.querySelector("button");l&&l.classList.add("active")}else{let i=document.querySelector(`.sidebar nav button[data-target="${e}"]`);i&&i.classList.add("active")}let s=`${window.location.pathname}?section=${e}`;history.replaceState(null,"",s)}let currentFilter="all";function filterItems(e){currentFilter=e;let t=document.querySelectorAll(".item-box");t.forEach(t=>{let a=t.querySelector(".item-button"),l=a.classList.contains("veg");t.style.display="all"===e||"veg"===e&&l||"non-veg"===e&&!l?"flex":"none"})}function searchItems(){let e=document.getElementById("searchBox").value.toLowerCase(),t=document.querySelectorAll(".item-button");t.forEach(t=>{let a=t.innerText.toLowerCase(),l=t.classList.contains("veg"),i="all"===currentFilter||"veg"===currentFilter&&l||"non-veg"===currentFilter&&!l;t.parentElement.style.display=a.includes(e)&&i?"flex":"none"})}function submitSelected(e,t){let a=document.querySelectorAll(`.${e}`),l=!1;if(a.forEach(e=>{e.checked&&(l=!0)}),!l){alert("Please select at least one item.");return}document.getElementById(t).submit()}function renderLineChart(e){let t=document.getElementById("lineChart").getContext("2d");new Chart(t,{type:"line",data:{labels:e.labels,datasets:e.datasets},options:{responsive:!0,interaction:{mode:"index",intersect:!1},stacked:!1,plugins:{title:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Quantity"}},x:{title:{display:!0,text:"Date"}}}}})}function renderSalesBarChart(e){let t=document.getElementById("salesBarChart").getContext("2d");new Chart(t,{type:"bar",data:{labels:e.labels,datasets:e.datasets},options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Total Sales (₹) per Day"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Total ₹"}},x:{title:{display:!0,text:"Date"}}}}})}function selectItem(e){let t=e.getAttribute("data-id"),a=e.getAttribute("data-name"),l=e.getAttribute("data-price"),i="true"===e.getAttribute("data-veg"),s="true"===e.getAttribute("data-available");document.querySelectorAll(".item-row").forEach(e=>e.classList.remove("selected")),e.classList.add("selected"),document.getElementById("edit-item-id").value=t,document.getElementById("edit-item-name").value=a,document.getElementById("edit-item-price").value=l,document.getElementById("edit-item-veg").checked=i,document.getElementById("edit-item-available").checked=s,document.getElementById("editItemForm").action=`/update_item/${t}`,document.getElementById("delete-item-id").value=t,document.getElementById("deleteItemForm").action=`/delete_item/${t}`,document.getElementById("delete-btn").disabled=!1}function selectDeletedItem(e){let t=e.getAttribute("data-id");document.querySelectorAll(".deleted-item-row").forEach(e=>e.classList.remove("selected")),e.classList.add("selected"),document.getElementById("restore-item-id").value=t,document.getElementById("restoreItemForm").action=`/restore_item/${t}`,document.getElementById("restore-btn").disabled=!1}document.addEventListener("DOMContentLoaded",function(){let e=new URLSearchParams(window.location.search),t=e.get("section");t||"undefined"==typeof initialSection||(t=initialSection);let a=window.location.pathname.includes("/admin");showSection(t=t||(a?"manage_users":"billing")),"exists"===e.get("error")&&alert("Item already exists! you can update it."),window.chartData&&renderLineChart(window.chartData),window.salesBarData&&renderSalesBarChart(window.salesBarData)});